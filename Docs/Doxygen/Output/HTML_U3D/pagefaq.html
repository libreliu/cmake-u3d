<HTML>
<HEAD>
<TITLE>Universal 3D:Universal 3D: Frequently Asked Questions</TITLE>
<meta name = "description" content = "">
<meta name = "keywords" content = "">
<meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<link href="U3D.css" rel="stylesheet" type="text/css">
</HEAD>
<BODY bgcolor="#eeeeee">
<A NAME="#top">

<TABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0"  BORDER="0">
<TR>
 <TD COLSPAN="2" BACKGROUND="ImagesCommon/top.gif"><IMG SRC="ImagesCommon/top_left.gif" WIDTH="31" HEIGHT="15"></TD>
 <TD COLSPAN="2" BACKGROUND="ImagesCommon/top.gif"></TD>
 <TD COLSPAN="1" WIDTH="100" ><IMG SRC="ImagesCommon/top_right.gif" HEIGHT="15" ></TD>
</TR>
<TR>
  <TD BGCOLOR="#0033ff" WIDTH="31"><TABLE WIDTH="31" CELLPADDING="0" CELLSPACING="0"  BORDER="0"></TABLE></TD>
  <TD WIDTH = "18" VALIGN="top"  ><IMG SRC="ImagesCommon/nav_spacer.gif" BORDER="0" ></TD>
  <TD WIDTH="*" BACKGROUND="ImagesCommon/yellowback2.gif" VALIGN="top" >
  <TABLE WIDTH="290" CELLPADDING="0" CELLSPACING="0"  BORDER="0"></TABLE>
<A class="qindex" href="index.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> main</FONT></B></A>
<A class="qindex" href="hierarchy.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> hierarchy</FONT></B></A>
<A class="qindex" href="annotated.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> annotated types</FONT></B></A>
<A class="qindex" href="classes.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> type index</FONT></B></A>
<A class="qindex" href="functions.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> functions</FONT></B></A>
<A class="qindex" href="globals.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> globals</FONT></B></A>
<A class="qindex" href="files.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> files</FONT></B></A>
<A class="qindex" href="dirs.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> directories</FONT></B></A>
<A class="qindex" href="pages.html"><IMG ALIGN="middle" SRC="ImagesCommon/bullet.gif" BORDER="0"><B><FONT SIZE=-1 FACE="arial" COLOR="#315AFF"> related pages</FONT></B></A>
</TD>
  <TD  WIDTH="*" VALIGN="top" ALIGN="left" BACKGROUND="ImagesCommon/logospacer.gif"><IMG SRC="ImagesCommon/logo_spacer.gif" WIDTH="22" HEIGHT="52"></TD>
  <TD  WIDTH="100" VALIGN="top" ALIGN="right" ><A HREF="http://sourceforge.net/projects/u3d/"><IMG SRC="ImagesCommon/logo.gif"  HEIGHT="52" BORDER="0"></A></TD>
</TR>
</TABLE>

<TABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0"  BORDER="0">
<TR>
<TD WIDTH="39" BACKGROUND="ImagesCommon/left2.gif"  align="left"></TD>
<TD WIDTH="10" BGCOLOR="#eeeeee"></TD>
<TD WIDTH="*" BGCOLOR="#eeeeee">
<BR>
<!-- Generated by Doxygen 1.4.4 -->
<h1><a class="anchor" name="PageFAQ">Frequently Asked Questions</a></h1>These are some Frequently Asked Questions about the Universal 3D Sample Software and the ECMA-363 Universal 3D File Format.<p>
Special thanks to those that have contributed information to this FAQ. Please continue to submit additions, corrections and suggestions to help improve this FAQ for all users.<p>
<hr>
 <h2><a class="anchor" name="SectionContents">
Contents</a></h2>
<ul>
<li><a class="el" href="pagefaq.html#SectionGeneral">General</a><ul>
<li><a class="el" href="pagefaq.html#Q_General_WhatIsU3DSampleSoftware">What is the U3D Sample Software?</a></li><li><a class="el" href="pagefaq.html#Q_General_WhatIsECMA363">What is ECMA-363?</a></li><li><a class="el" href="pagefaq.html#Q_General_WhereGetECMA363">Where can I get ECMA-363?</a></li><li><a class="el" href="pagefaq.html#Q_General_WhatIsThreadingModel">What is the U3D Sample Software's threading model?</a></li></ul>
</li></ul>
<p>
<ul>
<li><a class="el" href="pagefaq.html#SectionConventions">Conventions</a><ul>
<li><a class="el" href="pagefaq.html#Q_Conventions_DoConventionsExist">Are there any coding conventions?</a></li><li><a class="el" href="pagefaq.html#Q_Conventions_WhatIsNR">What does <code>NR</code> at the end of a function name mean?</a></li><li><a class="el" href="pagefaq.html#Q_Conventions_WhatIsX">What does <code>X</code> at the end of an interface, component, class or function name mean?</a></li></ul>
</li></ul>
<p>
<ul>
<li><a class="el" href="pagepackagingdiagrams.html#SectionRendering">Rendering</a><ul>
<li><a class="el" href="pagefaq.html#Q_Rendering_WhatIsLightingModel">What is the lighting model?</a></li></ul>
</li></ul>
<p>
<hr>
 <h2><a class="anchor" name="SectionGeneral">
General</a></h2>
<h3><a class="anchor" name="Q_General_WhatIsU3DSampleSoftware">
What is the U3D Sample Software?</a></h3>
A set of C++ dynamic link run-time libraries to write, read, extend, render and interact with U3D-formatted data. It is intended to demonstrate how to perform such activities and to be used as a starting point for tools and applications to support U3D. Example clients include exporters, converters, importers, authoring packages and interactive viewers.<h3><a class="anchor" name="Q_General_WhatIsECMA363">
What is ECMA-363?</a></h3>
It is ECMA International's formal name for the <em>Universal</em> <em>3D</em> <em>File</em> <em>Format</em> specification which describes a 3D file format and the minimal run-time architecture required to support it. The format is intended for downstream 3D CAD repurposing and visualization. Salient features include continuous-level-of-detail, compression, support for progressive data streaming and playback, as well as key-frame node and bones-based animation. 2nd edition of the standard provides extensibility of the format and run-time.<h3><a class="anchor" name="Q_General_WhereGetECMA363">
Where can I get ECMA-363?</a></h3>
The <em>Universal</em> <em>3D</em> <em>File</em> <em>Format</em> specification is freely available from <a href="http://www.ecma-international.org/default.htm">ECMA International*</a> as standard <a href="http://www.ecma-international.org/publications/standards/Ecma-363.htm">ECMA-363</a>.<h3><a class="anchor" name="Q_General_WhatIsThreadingModel">
What is the U3D Sample Software's threading model?</a></h3>
The U3D Sample Software is currently single-threaded and must be used in a single-threaded manner.<p>
<hr>
 <h2><a class="anchor" name="SectionConventions">
Conventions</a></h2>
<h3><a class="anchor" name="Q_Conventions_DoConventionsExist">
Are there any coding conventions?</a></h3>
Conventions for coding the U3D Sample Software do exist. There are general <a class="el" href="pagecodingconventions.html">coding conventions</a> and also specific ones for designing and using the <a class="el" href="pagecodingconventionsifxcom.html">IFXCOM component framework</a>.<h3><a class="anchor" name="Q_Conventions_WhatIsNR">
What does NR at the end of a function name mean?</a></h3>
Generally, a function name ends with the suffix <code>NR</code> if the function breaks the <a class="el" href="pagecodingconventionsifxcom.html">IFXCOM Coding Conventions</a> and returns an interface pointer that has <em>no</em> <em>reference</em> count increase done. In other words, the interface pointer handed back is a weak reference and it is not necessary to call its <code><a class="el" href="class_i_f_x_unknown.html#a1">IFXUnknown::Release</a></code> function after it is no longer needed.<p>
<dl compact><dt><b>Note:</b></dt><dd>Beware, this convention was not always used from the start of the project so it is possible that some functions that hand back weak references to interfaces may not have the <code>NR</code> function name suffix.</dd></dl>
<h3><a class="anchor" name="Q_Conventions_WhatIsX">
What does X at the end of an interface, component, class or function name mean?</a></h3>
Generally, an interface, component, class and function name will have an <code>X</code> suffix if it throws known exceptions of type <code><a class="el" href="class_i_f_x_exception.html">IFXException</a></code>.<p>
<dl compact><dt><b>Note:</b></dt><dd>Beware, this convention was not always used from the start of the project so it is likely there are some of these without <code>X</code> suffixes that do throw <code><a class="el" href="class_i_f_x_exception.html">IFXException</a></code> exceptions. The conventions was used most for interfaces and least for functions, components and classes.<p>
Exception handling was added late in the development of the software code base and thus is not used predominately throughout the software. It was only fully added for the encoders in the <code>IFXExporting</code> and decoders in the <code>IFXImporting</code> DLs.</dd></dl>
<hr>
 <h2><a class="anchor" name="SectionRendering">
Rendering</a></h2>
<h3><a class="anchor" name="Q_Rendering_WhatIsLightingModel">
What is the lighting model?</a></h3>
The lighting model used by renderer is as follows:<p>
<div class="fragment"><pre class="fragment">finalColor =   material.emissive
             + material.ambient * global_ambient
             + sum( all light_factors ) </pre></div><p>
Each <b>NON-AMBIENT</b> type light has a <code>light_factor:</code> <p>
<div class="fragment"><pre class="fragment">light_factor[ i ] = 
        attenuation_factor * 
        (   ( material.ambient * light.ambient ) 
          + ( material.diffuse * light.diffuse * ( vertex.normal dot light.direction_from_vertex ) )
          + ( material.specular * light.specular * ( ( vertex.normal dot half_angle ) ^ specular_power ) )
        )

dist = distance from light to vertex

attenuation_factor = 
        1 / ( light.atten[ 0 ] + dist * light.atten[ 1 ] + dist * dist * light.atten[ 2 ] )

half_angle = normalize( light.direction_from_vertex + view.direction_from_vertex )  </pre></div><p>
Each light’s color is multiplied by the light intensity before it is submitted to the rendering engine. So, consider that<p>
<div class="fragment"><pre class="fragment">light.ambient   = IFXLight.ambient  * IFXLight.intensity
light.diffuse   = IFXLight.diffuse  * IFXLight.intensity
light.specular  = IFXLight.specular * IFXLight.intensity    </pre></div><p>
Lights that have a type of <b>AMBIENT</b> at the IFX level have all of their colors summed and set as a global ambient in the rendering engine.<p>
<div class="fragment"><pre class="fragment">global_ambient = sum( all IFX lights of type AMBIENT )	</pre></div><p>
<dl compact><dt><b>Note:</b></dt><dd>For <b>AMBIENT</b> type lights, the color is not scaled by the intensity factor before being added into the renderer’s global ambient. So, intensity has no effect on <b>AMBIENT</b> lights.<p>
For <b>AMBIENT</b> type lights, the ambient color is actually internally stored in the diffuse variable. </dd></dl>
<P>

<TABLE CELLPADDING="0" CELLSPACING="0" BORDER="0">
 <TR><TD>
 <FONT SIZE="-2" FACE="arial"><I>&#169; 1999 - 2006 Intel Corporation. All rights reserved.<BR><BR>
 * Other names and brands may be claimed as the property of others.</I></FONT>
 </TD></TR>
</TABLE>

<TABLE WIDTH="100%" CELLPADDING="0" CELLSPACING="0" BORDER="0">
<TR>
<TD WIDTH="18"><IMG SRC="ImagesCommon/footer1.gif" HEIGHT="45" BORDER="0"></TD>
<TD WIDTH="5" ><IMG SRC="ImagesCommon/footer2.gif" WIDTH="5" HEIGHT="45" BORDER="0"></TD>
<TD WIDTH="28"><IMG SRC="ImagesCommon/footer3.gif" HEIGHT="45" BORDER="0"></TD>
<TD BACKGROUND="ImagesCommon/footer4.gif" WIDTH="*"><IMG SRC="ImagesCommon/footer4.gif" HEIGHT="45" BORDER="0"></TD>
<TD WIDTH="26"><IMG SRC="ImagesCommon/footer5.gif" HEIGHT="45" BORDER="0"></TD>
</TR>
<TR><TD COLSPAN="5"></TD></TR>
</TABLE>


